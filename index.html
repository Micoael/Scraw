<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate"/>
        <meta charset="UTF-8"/>
        <link rel="stylesheet" href="//cdnjs.loli.net/ajax/libs/mdui/0.4.3/css/mdui.min.css">
        <script src="//cdnjs.loli.net/ajax/libs/mdui/0.4.3/js/mdui.min.js"></script>
        <link href="//cdn.muicss.com/mui-0.10.0/css/mui.min.css" rel="stylesheet" type="text/css"/>
        <script src="//cdn.muicss.com/mui-0.10.0/js/mui.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
        <meta http-equiv="X-UA-Compatible" content="ie=edge"/>
        <title>Prize</title>
        <style type="text/css">
            .demo {
                width: 320px;
                margin: 10px auto 20px auto;
                min-height: 300px;
            }
.mui-btn:disabled {
    width: 80%;
}
.mui-btn {
    width: 100%;
}
            .canvas {
                position: relative;
    left: 40%;
            }
            .mui-panel {
                text-align: center;
    padding: 15px;
    margin-bottom: 20px;
    margin: 20px;
    border-radius: 0;}
            .main {
                margin: 10px 20px 20px 20px;
                min-height: 300px;
            }

              .thisismyid {
                margin: 10px 20px 20px 20px;
            }
            
            .developer {
                margin: 10px 20px 20px 20px;
            }
            .msg {
                text-align: center;
                height: 32px;
                line-height: 32px;
                font-weight: bold;
                margin-top: 50px;
            }
        </style>
    </head>
    <body>
        <div id="main" margin="20">
            <div class="mdui-appbar" id="thisismyid">
                <div class="mdui-toolbar mdui-color-blue-800" id = "developer">
                    <a href="javascript:;" class="mdui-btn mdui-btn-icon">
                        <i class="mdui-icon material-icons">menu</i>
                    </a>
                    <a href="javascript:;" class="mdui-typo-headline">Scraw to win</a>
                    <a href="javascript:;" class="mdui-typo-title">by mp</a>
                    <div class="mdui-toolbar-spacer"></div>
                    <a href="javascript:;" class="mdui-btn mdui-btn-icon">
                        <i class="mdui-icon material-icons">search</i>
                    </a>
                </div>
            </div>
            <div class="mui-container">
                <div class="mui-panel">
                    <h1>Obtaining awards from Final Exam... </h1>
                    
                    <canvas id="canvas"></canvas>
                    <button class="mui-btn mui-btn--primary mui-btn--raised" id="try_again" disabled="true">Next ▶ </button>
                    <div class="mdui-spinner mdui-spinner-colorful" id="progressbar"></div>
                    <h5>Made with MUI and Material Design. Prototype by superzxk, and made with ♥ by Micoael_Primo</h5>
                    <h5>↓ Scroll down the page to read the About page after you had enough fun ↓ --MicoaelPrimo 2020.1.14 21:19</h5>
                </div>
            </div>
            <div class="mui-container">
                <div id="main" class="mui-panel">
                    <h1>About </h1>
                    <h5>----------------------------------- </h5>
                    <h5>The phrase Made With love is a popular way to say that the website is made based on Google's design principle aka Material Design. </h5>
                    <h5>----------------------------------- </h5>
                    <h5>The website is not perfect, for I haven't done a page like this before. </h5>
                    <h5>What you see here is my result of my learning in about 3 days.</h5>
                    <h5>----------------------------------- </h5>
                    <h5>Frustrated to say I didn't perform well...both in the web-designing and the final exam...</h5>
                    <h5>And anyway... as 3b1b says 'That's where all the learning really happens dont you think'...</h5>
                    <h5>Thanks for accompanying in this term. I have learned a lot.</h5>
                    <h5>----------------------------------- </h5>
                    <h5>I will stay in the OI team to make sure ZYZOI is safe.</h5>
                    <h5>----------------------------------- </h5>
                    <h5>By the way if you wanna see the code behind this, click</h5>
                    <a href="https://github.com/Micoael/Scraw/">here</a>
                    <h5>(Leave a like, subscribe or leave a comment XD)</h5>
                    <h5>Bilibili ID: Micoael_Primo.</h5>
                </div>
            </div>
        </div>
        <script src="./scrapAward-dev.js"></script>
        <script>
            var hi = document.getElementById("progressbar");
            var prize = ["Sample 1", "Sample 2", "Sample 3", "Sample 4", "Sample 5"];
            var item = [2, 2, 2, 2, 1];
            var t = 9;
            var i = (Math.random()) * prize.length | 0;
            window.onload = function() {

                if (t >= -1) {
                    while (item[i] < 1) {
                        i = (Math.random() * prize.length) | 0;
                        console.log(item);
                    }
                }
                iden = i;
                console.log(i);
                item[i]--;

                t--;
                console.log(i);
                let scraAward = new ScrapAward({
                    height: 570,
                    backgroundImageUrl: 'http://via.placeholder.com/428x570?text=' + prize[i],
                    coverImage: {
                        url: './p3.png',
                        // color: 'grey',
                        width: 428,
                        height: 570,
                    },
                    callback: ()=>{
                        hi.hidden = true;
                        console.log("Current items:" + item + "  ,and " + t + "items left.");
                        alert("Current items:" + item + "  ,and there are " + t + " items left.");
                        var stamp = document.getElementById("try_again");
                        stamp.disabled = false;
                    }
                    ,
                });
                document.getElementById('try_again').addEventListener('click', function(e) {
                    hi.hidden = false;
                    t--;
                    if (t > -1) {
                        console.log(t);
                        var stamp = document.getElementById("try_again");
                        stamp.disabled = true;
                        i = (Math.random()) * prize.length | 0;

                        while (item[i] < 1) {
                            i = (Math.random() * prize.length) | 0;
                            console.log("Current items:" + item + "  ,and " + t + "items left.");
                        }

                        item[i]--;
                        iden = i;
                        scraAward.restart({
                            height: 570,
                            backgroundImageUrl: 'http://via.placeholder.com/428x570?text=' + prize[i],
                            coverImage: {
                                url: './p3.png',
                                // color: 'grey',
                                width: 428,
                                height: 570,
                            },
                            callback: ()=>{
                                hi.hidden = true;
                                console.log(t);
                                alert("Current items:" + item + "  ,and there are " + t + " items left.");
                                var stamp = document.getElementById("try_again");
                                stamp.disabled = false;
                            }
                            ,
                        });
                    } else {
                        alert("Chances used up. Reloading...")
                        location.reload();

                    }
                });
            }
            ;
        </script>
    </body>
</html>
