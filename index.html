<!DOCTYPE html>
<html lang="en">
    <head>
	<meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate" />
        <meta charset="UTF-8" />
	    <link href="//cdn.muicss.com/mui-0.10.0/css/mui.min.css" rel="stylesheet" type="text/css" />
	    <script src="//cdn.muicss.com/mui-0.10.0/js/mui.min.js"></script>
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <meta http-equiv="X-UA-Compatible" content="ie=edge" />
        <title>Prize</title>
        <style type="text/css">
            .demo {
                width: 320px;
                margin: 10px auto 20px auto;
                min-height: 300px;
            }
            .msg {
                text-align: center;
                height: 32px;
                line-height: 32px;
                font-weight: bold;
                margin-top: 50px;
            }
        </style>
    </head>
    <body>
        <div id="main">
		<div class="mui-container">
      <div class="mui-panel">
        <h1>刮刮卡</h1>
        <button class="mui-btn mui-btn--primary mui-btn--raised" id = "try_again" disabled="true">继续</button>
      </div>
    </div>
            <div class="demo">
                <canvas id="canvas"></canvas>
            </div>
        </div>
        <script src="./scrapAward-dev.js"></script>
        <script>
		var prize = ["https://cdn.luogu.com.cn/upload/pic/36751.png","https://cdn.luogu.com.cn/upload/image_hosting/enuh4qry.png","https://cdn.luogu.com.cn/upload/image_hosting/hm03tpz7.png","https://cdn.luogu.com.cn/upload/image_hosting/lf9aj7gy.png"];
	var item  = [2,2,2,2];
		var t = 8;
		var i = (Math.random()) * prize.length | 0;
            window.onload = function() {
		    
	
		    
	
            if(t>0){
	    while (item[i] < 1) {
                i = (Math.random() * prize.length) | 0;
                console.log(item);
            }}
            item[i]--;
		t--;
                let scraAward = new ScrapAward({
                    height: 570,
                    backgroundImageUrl: prize[i],
                    coverImage: {
                        url: './p1.jpg',
                        // color: 'grey',
                        width: 428,
                        height: 570,
                    },
                    callback: () => {
                        alert('刮奖结束');
                    },
                });
                document.getElementById('try_again').addEventListener('click', function(e) {
                    scraAward.restart({
                    height: 570,
                    backgroundImageUrl: prize[i],
                    coverImage: {
                        url: './p1.jpg',
                        // color: 'grey',
                        width: 428,
                        height: 570,
                    },
                    callback: () => {
                        alert(item);
			    var stamp = document.getElementById("try_again");
			    stamp.disabled=false;
                    },
                });
		i = (Math.random()) * prize.length | 0;
            if(t>1){
	    while (item[i] < 1) {
                i = (Math.random() * prize.length) | 0;
                console.log(item);
            }
	    }
            item[i]--;	
		});
            };
        </script>
    </body>
</html>
